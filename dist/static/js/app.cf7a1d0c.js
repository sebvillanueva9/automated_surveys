(function(){"use strict";var e={6331:function(e,t,o){var r=o(3751),a=o(641),n=o(33);const l={key:1};function i(e,t,o,i,c,u){const s=(0,a.g2)("v-list-item-title"),d=(0,a.g2)("v-list-item-content"),f=(0,a.g2)("v-list-item"),p=(0,a.g2)("v-divider"),v=(0,a.g2)("v-icon"),m=(0,a.g2)("v-list-item-icon"),g=(0,a.g2)("v-list"),h=(0,a.g2)("v-navigation-drawer"),b=(0,a.g2)("v-app-bar-nav-icon"),k=(0,a.g2)("v-toolbar-title"),_=(0,a.g2)("v-spacer"),F=(0,a.g2)("v-btn"),y=(0,a.g2)("v-app-bar"),w=(0,a.g2)("router-view"),x=(0,a.g2)("v-container"),A=(0,a.g2)("v-main"),C=(0,a.g2)("v-app");return(0,a.uX)(),(0,a.Wv)(C,null,{default:(0,a.k6)((()=>[c.isAuthenticated?((0,a.uX)(),(0,a.Wv)(h,{key:0,app:"",modelValue:c.drawer,"onUpdate:modelValue":t[0]||(t[0]=e=>c.drawer=e),permanent:"",color:"accent"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{dense:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,{class:"title"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("Menú")]))),_:1})])),_:1})])),_:1}),(0,a.bF)(p),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(c.menuItems,(e=>((0,a.uX)(),(0,a.Wv)(f,{key:e.title,to:e.route,router:""},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.icon),1)])),_:2},1024)])),_:2},1024),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])))),128))])),_:1})])),_:1},8,["modelValue"])):(0,a.Q3)("",!0),(0,a.bF)(y,{app:"",color:"primary",dark:""},{default:(0,a.k6)((()=>[c.isAuthenticated?((0,a.uX)(),(0,a.Wv)(b,{key:0,onClick:t[1]||(t[1]=(0,r.D$)((e=>c.drawer=!c.drawer),["stop"]))})):(0,a.Q3)("",!0),(0,a.bF)(k,null,{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)("Automatización de Procesos")]))),_:1}),(0,a.bF)(_),c.isAuthenticated?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(F,{icon:"",onClick:u.logout},{default:(0,a.k6)((()=>[(0,a.bF)(v,{color:"white"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)("mdi-logout")]))),_:1})])),_:1},8,["onClick"])])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(A,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(w)])),_:1})])),_:1})])),_:1})}o(4114);var c={name:"App",data(){return{drawer:!1,menuItems:[{title:"Cargar Archivo",icon:"mdi-upload",route:"/cargar"},{title:"Otro Proceso",icon:"mdi-cog",route:"/otro-proceso"}],isAuthenticated:!1}},computed:{isUserAuthenticated(){return!!localStorage.getItem("access_token")}},watch:{isUserAuthenticated(e){this.isAuthenticated=e}},mounted(){this.isAuthenticated=!!localStorage.getItem("access_token"),this.isAuthenticated&&"/"===this.$router.currentRoute.path&&this.$router.push("/cargar")},methods:{logout(){localStorage.removeItem("access_token"),this.isAuthenticated=!1,this.$router.push("/login")}}},u=o(6262);const s=(0,u.A)(c,[["render",i]]);var d=s,f=o(5220);function p(e,t,o,l,i,c){const u=(0,a.g2)("v-card-title"),s=(0,a.g2)("v-text-field"),d=(0,a.g2)("v-btn"),f=(0,a.g2)("v-form"),p=(0,a.g2)("v-alert"),v=(0,a.g2)("v-card-text"),m=(0,a.g2)("v-card"),g=(0,a.g2)("v-col"),h=(0,a.g2)("v-row"),b=(0,a.g2)("v-container"),k=(0,a.g2)("v-main");return(0,a.uX)(),(0,a.Wv)(k,{class:"fill-height"},{default:(0,a.k6)((()=>[(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{justify:"center",align:"center",class:"login-card"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{cols:"12",sm:"8",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"text-h5"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("Iniciar Sesión")]))),_:1}),(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(f,{onSubmit:(0,r.D$)(c.login,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(s,{label:"Usuario",modelValue:i.username,"onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),required:""},null,8,["modelValue"]),(0,a.bF)(s,{label:"Contraseña",modelValue:i.password,"onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),type:"password",required:""},null,8,["modelValue"]),(0,a.bF)(d,{type:"submit",color:"secondary",block:""},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)("Ingresar")]))),_:1})])),_:1},8,["onSubmit"]),i.error?((0,a.uX)(),(0,a.Wv)(p,{key:0,type:"error"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(i.error),1)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var v=o(4335),m={name:"LoginPage",data(){return{username:"",password:"",error:""}},methods:{async login(){try{const e=await v.A.post("/api/login/",{username:this.username,password:this.password}),t=e.data.access_token;localStorage.setItem("access_token",t),this.$root.isAuthenticated=!0,this.$router.push("/")}catch(e){this.error="Usuario o contraseña incorrectos."}}}};const g=(0,u.A)(m,[["render",p],["__scopeId","data-v-7a9053e4"]]);var h=g;function b(e,t,o,n,l,i){const c=(0,a.g2)("v-card-title"),u=(0,a.g2)("v-file-input"),s=(0,a.g2)("v-icon"),d=(0,a.g2)("v-btn"),f=(0,a.g2)("v-form"),p=(0,a.g2)("v-card-text"),v=(0,a.g2)("v-spacer"),m=(0,a.g2)("v-card-actions"),g=(0,a.g2)("v-card"),h=(0,a.g2)("v-container");return(0,a.uX)(),(0,a.Wv)(h,{class:"d-flex justify-center align-center fill-height"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{class:"mx-auto my-5","max-width":"600px",outlined:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"headline text-center"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.eW)(" Subir Archivo de Encuesta ")]))),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(f,{onSubmit:(0,r.D$)(i.processFile,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"Seleccione un archivo Excel","prepend-icon":"mdi-upload",modelValue:l.file,"onUpdate:modelValue":t[0]||(t[0]=e=>l.file=e),accept:".xls,.xlsx",outlined:"",dense:"",required:""},null,8,["modelValue"]),t[4]||(t[4]=(0,a.Lk)("small",{class:"text-caption grey--text"},"Formatos aceptados: .xlsx, .xls",-1)),(0,a.bF)(d,{color:"secondary",class:"mt-4",block:"",disabled:!l.file,onClick:i.processFile},{default:(0,a.k6)((()=>[(0,a.bF)(s,{left:""},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("mdi-cloud-upload")]))),_:1}),t[3]||(t[3]=(0,a.eW)(" Procesar Archivo "))])),_:1},8,["disabled","onClick"])])),_:1},8,["onSubmit"])])),_:1}),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(v),(0,a.bF)(s,{color:"grey"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)("mdi-information-outline")]))),_:1}),t[6]||(t[6]=(0,a.Lk)("span",{class:"grey--text caption"},"Sube un archivo Excel para procesar los datos",-1))])),_:1})])),_:1})])),_:1})}var k={data(){return{file:null}},methods:{getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let r=0;r<o.length;r++){const a=o[r].trim();if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}}return t},async processFile(){if(!this.file)return void alert("Por favor selecciona un archivo primero.");let e=new FormData;e.append("archivo_excel",this.file);const t=this.getCookie("csrftoken");try{const o=await v.A.post("http://localhost:8000/api/cargar_archivo/",e,{headers:{"Content-Type":"multipart/form-data","X-CSRFToken":t,withCredentials:!0}});console.log("Respuesta del servidor:",o.data),alert("Archivo subido correctamente.")}catch(o){console.error("Error al subir el archivo:",o.response?o.response.data:o.message),alert("Error al subir el archivo.")}}}};const _=(0,u.A)(k,[["render",b],["__scopeId","data-v-5eaa116a"]]);var F=_;const y=[{path:"/login",name:"Login",component:h},{path:"/cargar",name:"CargarArchivo",component:F,meta:{requiresAuth:!0}},{path:"/",redirect:"/cargar"}],w=(0,f.aE)({history:(0,f.LA)(),routes:y});w.beforeEach(((e,t,o)=>{const r=["/login"],a=!r.includes(e.path),n=localStorage.getItem("access_token");if(a&&!n)return o("/login");o()}));var x=w,A=o(4825),C=(o(5524),o(2938)),S=o(3379),W=o(278);const O=(0,A.$N)({components:{...C,VDataTable:W.VDataTable},directives:S,theme:{defaultTheme:"myCustomTheme",themes:{myCustomTheme:{dark:!1,colors:{primary:"#46009b",secondary:"#ff7d00",accent:"#e2e2e2"}}}}});var V=O;const I=(0,r.Ef)(d);I.use(x),I.use(V),I.mount("#app")}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,r,a,n){if(!r){var l=1/0;for(s=0;s<e.length;s++){r=e[s][0],a=e[s][1],n=e[s][2];for(var i=!0,c=0;c<r.length;c++)(!1&n||l>=n)&&Object.keys(o.O).every((function(e){return o.O[e](r[c])}))?r.splice(c--,1):(i=!1,n<l&&(l=n));if(i){e.splice(s--,1);var u=a();void 0!==u&&(t=u)}}return t}n=n||0;for(var s=e.length;s>0&&e[s-1][2]>n;s--)e[s]=e[s-1];e[s]=[r,a,n]}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,n,l=r[0],i=r[1],c=r[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(c)var s=c(o)}for(t&&t(r);u<l.length;u++)n=l[u],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(s)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(6331)}));r=o.O(r)})();
//# sourceMappingURL=app.cf7a1d0c.js.map